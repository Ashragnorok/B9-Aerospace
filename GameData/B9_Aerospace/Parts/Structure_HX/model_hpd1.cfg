PART
{
    // --- general parameters ---
    name = B9_Structure_HX_HPD1
    module = Part
    author = bac9

    // --- asset parameters ---
    MODEL
    {
        model = B9_Aerospace/Parts/Structure_HX/model_hpd1
    }
    scale = 1
    rescaleFactor = 1

    // --- node definitions ---
    // definition format is Position X, Position Y, Position Z, Up X, Up Y, Up Z
    node_stack_top1 = 0.0, 2, 0.0, 0.0, -1.0, 0.0, 6

    // --- editor parameters ---
    TechRequired = aerospaceTech
    entryCost = 44750
    cost = 9800
    category = Propulsion
    subcategory = 0
    title = HX-HPD1 Heavy Propulsion Device
    manufacturer = Tetragon Projects
    description = This enormous dual-mode engine was engineered for missions with extremely heavy payloads such as delivering HX modules to orbit or powering interplanetary transfers of structures exceeding thousands of tonnes. It combines the performance of a traditional closed-cycle rocket engine and that of a nuclear-powered LV-N engine in one propulsion assembly. The tech behind it is unclear and Tetragon Projects has declined to respond to inquiries, but it appears to use electromagnetic fields to direct and accelerate exhaust gases. The primary mode uses relatively small amounts of power, while secondary mode uses a smaller amount of exhaust gases and draws enormous amounts of power. Any design utilizing this engine will be most likely be forced to use advanced power generator such as HX-URC18, although even it's output is barely able to sustain the engine's secondary mode in a vacuum, necessitating a capacitor like HX-UB18. Attempts to power it with solar panel arrays have so far been unsuccessful.

    // attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
    attachRules = 1,0,1,1,0
    stackSymmetry = 1

    // --- standard part parameters ---
    mass = 36
    dragModelType = default
    maximum_drag = 0.2
    minimum_drag = 0.15
    angularDrag = 2
    crashTolerance = 10
    maxTemp = 3400
    fuelCrossFeed = True
    breakingForce = 1800
    breakingTorque = 1800

    EFFECTS
    {
        running_closed
        {
            AUDIO
            {
                channel = Ship
                clip = sound_rocket_hard
                volume = 0.0 0.0
                volume = 1.0 1.0
                pitch = 0.0 0.2
                pitch = 1.0 1.0
                loop = true
            }
            PREFAB_PARTICLE
            {
                prefabName = fx_smokeTrail_veryLarge
                transformName = nozzle_transform
                emission = 0.0 0.0
                emission = 0.05 0.0
                emission = 0.075 0.25
                emission = 1.0 1.25
                speed = 0.0 0.25
                speed = 1.0 1.0
                localOffset = 0, 0, 1
            }
        }
        running_plasma
        {
            AUDIO
            {
                channel = Ship
                clip = sound_rocket_hard
                volume = 0.0 0.0
                volume = 1.0 1.0
                pitch = 0.0 0.2
                pitch = 1.0 1.0
                loop = true
            }
            PREFAB_PARTICLE
            {
                prefabName = fx_smokeTrail_veryLarge
                transformName = nozzle_transform
                emission = 0.0 0.0
                emission = 0.05 0.0
                emission = 0.075 0.25
                emission = 1.0 1.25
                speed = 0.0 0.25
                speed = 1.0 1.0
                localOffset = 0, 0, 1
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_medium
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }

    MODULE
    {
        name = MultiModeEngine
        primaryEngineID = ClosedCycle
        secondaryEngineID = HybridPlasma
    }

    MODULE
    {
        name = ModuleEnginesFX
        engineID = ClosedCycle
        runningEffectName = running_closed
        thrustVectorTransformName = nozzle_transform
        exhaustDamage = true
        ignitionThreshold = 0.1
        minThrust = 0
        maxThrust = 5550 // 5850
        heatProduction = 350
        PROPELLANT
        {
            name = LiquidFuel
            ratio = 0.9
            DrawGauge = True
        }
        PROPELLANT
        {
            name = Oxidizer
            ratio = 1.1
        }
        PROPELLANT
        {
            name = ElectricCharge
            ratio = 1.0
        }
        atmosphereCurve
        {
            key = 0 360
            key = 1 300
        }
    }

    MODULE
    {
        name = ModuleEnginesFX
        engineID = HybridPlasma
        runningEffectName = running_plasma
        thrustVectorTransformName = nozzle_transform
        exhaustDamage = true
        ignitionThreshold = 0.1
        minThrust = 0
        maxThrust = 2050 // 2160
        heatProduction = 400
        PROPELLANT
        {
            name = LiquidFuel
            ratio = 0.9
            DrawGauge = True
        }
        PROPELLANT
        {
            name = Oxidizer
            ratio = 1.1
        }
        PROPELLANT
        {
            name = ElectricCharge
            ratio = 16.0
        }
        atmosphereCurve
        {
            key = 0 795
            key = 1 230
        }
    }

    MODULE
    {
        name = KM_Gimbal
        gimbalTransformName = nozzle_transform
        pitchGimbalRange = 1.5
        yawGimbalRange = 1.5
        enableRoll = true
        enableSmoothGimbal = true
        responseSpeed = 80
    }

    MODULE
    {
        name = ModuleAnimateHeat
        ThermalAnim = hx_hpd2_heat
    }
}
